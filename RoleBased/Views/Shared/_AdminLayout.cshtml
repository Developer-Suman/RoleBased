@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Identity
@using System.Security.Claims
@using RoleBased.Models.Domain

@{
    string username = User.Identity.Name;
    string userId = User.FindFirstValue(ClaimTypes.NameIdentifier);

    var userManager = Context.RequestServices.GetService<UserManager<ApplicationUser>>();
    var user = await userManager.FindByNameAsync(username);
    var roles = await userManager.GetRolesAsync(user);
    var pp = user.ProfilePicture;
    var specificRoles = roles.Where(r => r == "Mechanics" || r == "User" || r == "Admin").ToList();
}



<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Megazine</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/all.min.css"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

  
  
</head>
<body style=" max-height:0px; max-width:auto; overflow:hidden;">
    <div class="container-fluid">
        <div class="row ">
            <div class="col-md-2 " style="margin:0; padding:0;">
                <div class="admin-menu" >

                    <a asp-action="EditProfilePicture" asp-controller="Admin">

                        <div style="display:flex; justify-content:center; align-items:center; height:200px;">
                            <div class="profilePicture mt-5">


                                <img src="~/Images/@pp" alt="ProfilePicture" class="avatar-xxl rounded-circle mb-1" style="max-width:100%; height:100%; width:100%;" />
                                @*  <img src="https://upload.wikimedia.org/wikipedia/commons/0/03/NOW_Magazine_Official_Logo.png" style="max-width:100%;" />*@

                            </div>

                        </div>
                    </a>


                    <div style="color:white; font-weight:bold; text-align:center; font-size:20px;  ">
                        @username


                        @foreach (var role in specificRoles)
                        {
                            <div style="font-size:15px;">
                                @role
                            </div>
                        }


                    </div>


                    <div class="admin-button mt-5">
                        <a asp-controller="Admin" asp-action="Display" class=" admin-link"><i class="fa-solid fa-house fa-lg" style="color: #33b482;"></i> &nbsp&nbsp&nbspDASHBOARD</a>
                    </div>


                    @if (User.Identity.IsAuthenticated)
                    {
                        if (User.IsInRole("Admin"))
                        {
                            <div class="admin-button">
                                <a asp-controller="Admin" asp-action="DisplayUserDetails" class=" admin-link"><i class="fa-solid fa-circle-info fa-lg" style="color: #33b482;"></i> &nbsp&nbsp&nbspADMIN DETAILS  </a>

                            </div>
                            <div class="admin-button">
                                <a asp-controller="Articles" class=" admin-link"><i class="fa-solid fa-message fa-lg" style="color: #33b582;"></i> &nbsp&nbsp&nbspMESSAGE DETAILS </a>

                            </div>


                            <div class="admin-button">
                                <a asp-controller="Articles" class=" dropdown-toggle admin-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa-solid fa-message fa-lg" style="color: #33b582;"></i> &nbsp&nbsp&nbsp INITIALLIZATION
                                </a>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" href="#">About Us</a>
                                    <a class="dropdown-item" href="#">Carousel</a>
                                    <a class="dropdown-item" href="#">Services</a>
                                    <a class="dropdown-item" href="#">Products</a>
                                    <a class="dropdown-item" href="#">Works</a>
                                    <a class="dropdown-item" href="#">Advertisement</a>
                                </div>
                            </div>

                            <div class="admin-button">
                                <a asp-controller="Articles" class=" dropdown-toggle admin-link" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa-solid fa-message fa-lg" style="color: #33b582;"></i> &nbsp&nbsp&nbsp ABOUT USERS
                                </a>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" asp-controller="Account" style="color:black;" asp-action="UserRegistration" class=" admin-link">ADD USERS </a>
                                    <a class="dropdown-item" asp-controller="AppRoles" style="color:black;" asp-action="Index" class=" admin-link">ADD ROLES</a>
                                    <a class="dropdown-item" asp-controller="Category" style="color:black;" asp-action="Category" class=" admin-link">ADD CATEGORIES</a>

                                </div>
                            </div>

                        }

                        else if (User.IsInRole("Mechanics"))
                        {
                            @* <div class="admin-button mt-5">
                    <a asp-controller="Mechanics" class=" admin-link">DASHBOARD  <i class="fa-solid fa-house fa-lg" style="color: #33b482; margin-left:65px;"></i> </a>
                    </div>*@
                            <div class="admin-button">
                                <a asp-controller="Admin" asp-action="DisplayUserDetails" class=" admin-link">
                                    <i class="fa-solid fa-circle-info fa-lg" style="color: #33b482;"></i> &nbsp&nbsp&nbsp MECHANICS DETAILS

                                </a>

                            </div>

                            <div class="admin-button">
                                <a asp-controller="Article" class=" admin-link"><i class="fa-solid fa-message fa-lg" style="color: #33b582;"></i> &nbsp&nbsp&nbsp MESSAGE DETAILS</a>

                            </div>

                        }

                        else if (User.IsInRole("User"))
                        {
                            <div class="admin-button">
                                <a asp-controller="Admin" asp-action="DisplayUserDetails" class=" admin-link"><i class="fa-solid fa-circle-info fa-lg" style="color: #33b482;"></i> &nbsp&nbsp&nbspUSERS DETAILS </a>

                            </div>

                            <div class="admin-button">
                                <a asp-controller="Materials" asp-action="Materials" class=" admin-link"><i class="fa-solid fa-recycle fa-lg" style="color: #33b582;"></i> &nbsp&nbsp&nbspADD MATERIALS </a>

                            </div>

                            <div class="admin-button">
                                <a asp-controller="Article" class=" admin-link">
                                    <i class="fa-solid fa-message fa-lg" style="color: #33b582;"></i> &nbsp&nbsp&nbsp MESSAGE DETAILS

                                </a>

                            </div>



                        }

                        else
                        {
                            <p>No any Roles</p>

                        }
                    }
                    else
                    {
                        <p>Please log in</p>
                    }


                    @* @if (User.IsInRole("Admin"))
                    {
                    <div class="admin-button">
                    <a asp-controller="Account" asp-action="UserRegistration" class=" admin-link">ADD USERS <i class="fa-solid fa-user-plus fa-lg" style="color: #33b482; margin-left:77px;"></i> </a>


                    </div>

                    <div class="admin-button">
                    <a asp-controller="AppRoles" asp-action="Index" class=" admin-link">ADD ROLES <i class="fa-solid fa-user fa-lg" style="color: #03b482;  margin-left:77px;"></i></a>

                    </div>
                    }*@







                    <div class="admin-button">
                        <a asp-controller="Article" class=" admin-link"> <i class="fa-solid fa-flag fa-lg" style="color: #33b482;"></i> &nbsp&nbsp&nbsp REPORT </a>


                    </div>
                    <div class="admin-button">

                        <a asp-controller="Account" asp-action="Logout" class=" admin-link  btn-sm btn-danger" style=" padding:5px; margin-left:22px; padding-right:95px;">LOGOUT &nbsp <i class="fa-solid fa-right-from-bracket"></i></a>

                    </div>



                    @*<div style="display:flex; justify-content:center; align-items:center; height:150px;">
                    <img src="~/Images/logofinal.png" height="150px" width="50%" />

                    </div>*@




                </div>


            </div>
            <div class="col-md-10">

                <div>
                    <div>
                        <div class="row admin-pages">
                            @*     <div class="col-md-1">
                            <div class="admin-logo">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/0/03/NOW_Magazine_Official_Logo.png" height="70px" width="32%" />
                            </div>


                            </div>*@
                            <div class="col-md-9" style="align-items:center; display:flex;">
                                @if (User.IsInRole("Mechanics"))
                                {
                                    <a asp-controller="Materials" asp-action="ShowMaterials" class="btn" style="background-color:#33b482;color:#fff;">Product Queue</a>
                                }
                                else if (User.IsInRole("User"))
                                {
                                    <a asp-controller="Article" class="btn btn-success" style="background-color:#33b482;">Product Details</a>

                                }
                                else
                                {
                                    <a asp-controller="Article" class="btn" style="background-color:#33b582; color:#fff;">User Details</a>

                                }
                                @* <a asp-controller="Article" class="btn btn-success">REPORT</a>
                                <a asp-controller="Article" class="btn btn-success">REPORT</a>*@
                            </div>
                            <div class="col-md-3 admin-user" style="align-items:center;">

                                <div style="">
                                    <form class="d-flex" style="align-items:center;">
                                        <input class="form-control me-2" type="search" placeholder="Search" style="border:none; border-bottom:2px solid green; ">
                                        <i class="fa-solid fa-magnifying-glass fa-lg"></i>
                                        @*<button class="btn btn-outline-success" type="submit">Search</button>*@
                                    </form>
                                </div>


                                @* <i class='fa fa-user-circle' style="font-size:20px;  padding-bottom:10px;"></i> &nbsp; <div style="font-weight:bold; padding-bottom:10px;">Welcome @username</div>*@




                            </div>
                        </div>
                    </div>

                </div>
                @RenderBody()
            </div>
        </div>
   </div>
    
   
@*    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>*@


    @* <script src="~/lib/jquery/dist/jquery.min.js"></script>*@
    <script src="~/assets/plugins/jquery/jquery.min.js"></script>

    <!--Moment js-->
    <script src="~/assets/plugins/moment/moment.js"></script>

    @*jquery css and js*@
    <link href="~/lib/JqueryToast/jquery.toast.css" rel="stylesheet" />
    <script src="~/lib/JqueryToast/jquery.toast.js"></script>
    <script src="~/js/all.min.js"></script>

    <script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/lib/jquery-validation/dist/additional-methods.js"></script>


    <script src="~/assets/plugins/bootstrap/popper.min.js"></script>
    <script src="~/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- INTERNAL Data tables -->
    <script src="~/assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/plugins/datatable/js/dataTables.bootstrap4.js"></script>
    <script src="~/assets/plugins/datatable/js/dataTables.buttons.min.js"></script>
    <script src="~/assets/plugins/datatable/js/buttons.bootstrap4.min.js"></script>
    <script src="~/assets/plugins/datatable/dataTables.responsive.min.js"></script>
    <script src="~/assets/plugins/datatable/responsive.bootstrap4.min.js"></script>

    @await RenderSectionAsync("Scripts", required: false)

</body>
</html>
