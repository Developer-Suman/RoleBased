@model RoleBased.Models.ViewModel.ApplicationUserVM;

@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}



<hr />

<div class="container" style="max-width:785px;">

    <div class="row">
        <div class="col-lg-7 col-xl-7 col-md-6 col-sm-7">
            <div class="card">
                <div class="card-header border-bottom-0">
                    <h4 class="card-title">Add Profile</h4>
                </div>
                <div class="card-body">
                    <form id="formIdCreateProject" asp-action="EditProfilePicture" method="post" enctype="multipart/form-data">
                        <div class="form-group row">

                            <div class="col-md-9">
                                <label for="inputName" class="form-label">Username</label>
                                <input type="text" asp-for="Name" class="form-control" id="inputName" placeholder="Name">
                                <span asp-validation-for="Name" class="text-danger"></span>

                                <label asp-for="Fullname"></label>
                                <input type="text" asp-for="Fullname" class="form-control" id="inputName" placeholder="Name">
                                <span asp-validation-for="Fullname" class="text-danger"></span>

                                <label asp-for="Address"></label>
                                <input type="text" asp-for="Address" class="form-control" id="inputName" placeholder="Name">
                                <span asp-validation-for="Address" class="text-danger"></span>

                                <label asp-for="Phone"></label>
                                <input type="text" asp-for="Phone" class="form-control" id="inputName" placeholder="Name">
                                <span asp-validation-for="Phone" class="text-danger"></span>

                                <label asp-for="Gender_Status"></label><br/>
                                <select asp-for="Gender_Status" asp-items="Html.GetEnumSelectList<RoleBased.Enum.GenderEnum>()">
                                    <option value="">Select Gender</option>
                                </select><br/>

                                <label asp-for="ProfilePicture"></label>
                                <input type="file" asp-for="File" class="form-control" id="file" />



                            </div>

                        </div>


                        <div class="form-group mb-0 mt-4 row justify-content-end">
                            <div class="col-md-9">
                                @*<input class="btn btn-primary" type="submit" value="Update Profile" class="btn btn-primary" />*@
                                <button id="submitButtonProject" type="submit" class="btn btn-secondary">Submit</button>
                                <button type="button" class="btn btn-secondary">Cancel</button>

                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/lib/jquery/dist/jquery.min.js"></script>



<script src="~/js/site.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script src="~/lib/JqueryToast/jquery.toast.js"></script>


<script>

    $("#submitButtonProject").click(function (ev) {

        ev.preventDefault();
        debugger;



        var form = $('#formIdCreateProject')[0];
        var formData = new FormData(form);
        //formData.append('file', $('input[type=file]')[0].files[0]);

        //var form = $("#formIdCreateProject").serialize();


        var validator = $("#formIdCreateProject").validate();
        if (validator.form() == "") {
            //If the "Please Select" option is selected display error.

            $.toast({
                heading: 'Error',
                text: 'Create Failed Please fill out the Required Details',
                icon: 'error',
                position: 'top-right'
            })

            return false;
        }


        $.ajax({

            type: "POST",
            url: "/Admin/EditProfilePicture",
            //data: form,
            data: formData,
            processData: false,
            contentType: false,



            success: function (data) {
                if (data === true) {
                    $.toast({
                        heading: 'Success',
                        text: 'Profile Added Successfully',
                        icon: 'success',
                        position: 'top-right',

                    })
                    //reload page after create and Toast message nice na haha
                    $('#inputName').val('');

                    window.location.href = '/Admin/Display';
                }

                else {
                    $.toast({
                        heading: 'Error',
                        text: 'Data is Already Exist in the system',
                        icon: 'error',
                        position: 'top-right'
                    })
                }
            },
            error: function (data) {
                $.toast({
                    heading: 'Error',
                    text: 'Project Create Failed',
                    icon: 'error',
                    position: 'top-right'

                })

            }
        });


    });

</script>




